<div class="scrollbar scrollbar-primary">
    <div class="d-flex bd-highlight permisoEmpleado">
        <mat-icon class="flex-shrink-1 bd-highlight" id="movilidad">open_with</mat-icon>
        <h5 class="w-100 bd-highlight" mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" ngDefaultControl
            [(ngModel)]="num" [ngModelOptions]="{standalone: true}"> Editar Solicitud de Permiso N°
            {{num}}</h5>
    </div>
    <!-- Formulario Completo -->
    <form [formGroup]="PermisoForm">
        <mat-card-content>
            <div class="container" style="padding-top: 15px; text-align: center;">
                <div class="nota">
                    <span>NOTA: Por favor llenar todos los campos obligatorios (*) del formulario para activar el botón
                        Guardar.</span>
                </div>
                <div class="d-flex flex-wrap justify-content-around">
                    <mat-form-field>
                        <mat-label>Seleccionar Permiso</mat-label>
                        <mat-icon id="permiso" matSuffix  matTooltipPosition="right"
                            matTooltip="Lista de Tipos de Permisos existentes">
                            help_outline</mat-icon>
                        <mat-select [formControl]="idPermisoF" required>
                            <mat-option *ngFor="let per of tipoPermisos" (click)="ImprimirDatos(PermisoForm.value)"
                                [value]="per.id">
                                {{per.descripcion}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Descripción</mat-label>
                        <input matInput placeholder="Ej: Descripcion del tipo de permiso"
                            (keypress)="IngresarSoloLetras($event)" [formControl]="descripcionF" required>
                        <mat-icon id="permiso" matSuffix  matTooltipPosition="right"
                            matTooltip="Indicar un motivo por el que solicita el permiso">
                            help_outline</mat-icon>
                        <mat-error *ngIf="descripcionF.invalid">{{ObtenerMensajeErrorDescripcion()}}</mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label id=solP>Solicitud de permiso por:</mat-label>
                        <mat-icon id="permiso" matSuffix  matTooltipPosition="right"
                            matTooltip="Seleccionar si el permiso será por días o por horas y minutos">
                            help_outline</mat-icon>
                        <mat-select [formControl]="solicitarF" required>
                            <mat-option *ngFor="let dh of diasHoras" [value]="dh.valor"
                                (click)="ActivarDiasHoras(PermisoForm.value)">
                                {{dh.nombre}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="!HabilitarDias">
                        <mat-label>Días de permiso</mat-label>
                        <input matInput placeholder="Ej: 3" (keypress)="IngresarSoloNumeros($event)"
                            [formControl]="diasF" [ngStyle]="estiloDias" id="dias" (click)="LimpiarCamposFecha()">
                        <mat-icon id="permiso" matSuffix  matTooltipPosition="right"
                            matTooltip="Ingresar número de días solicitados de permiso">
                            help_outline</mat-icon>
                    </mat-form-field>
                    <mat-form-field *ngIf="!HabilitarHoras">
                        <mat-label>Horas y minutos de permiso</mat-label>
                        <input matInput type="time" placeholder="Ej: 4" (keypress)="IngresarSoloNumeros($event)"
                            max="7:30" [formControl]="horasF" [ngStyle]="estiloHoras" id="horas"
                            (click)="LimpiarCamposFecha()">
                        <mat-icon id="permiso" matSuffix  matTooltipPosition="right"
                            matTooltip="Ingresar número de horas y minutos solicitados de permiso. Se le recuerda que debe ingresar menos de 8 horas. En caso de necesitar más tiempo seleccionar Días.">
                            help_outline</mat-icon>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Fecha de Salida</mat-label>
                        <input matInput [matDatepicker]="picker2"
                            (dateInput)="validarFechaSalida($event, PermisoForm.value)" readonly
                            placeholder="dd/mm/aaaa" [formControl]="fechaInicioF" min="1950-01-31" max="2050-01-31"
                            required>
                        <mat-datepicker-toggle matSuffix [for]="picker2" id="permiso" 
                            matTooltipPosition="right"
                            matTooltip="Indicar la fecha en la desea el permiso. Seleccione la fecha dando click en el icono de calendario o puede escribir la fecha con el formato  día/mes/año. Ejemplo: 12/04/1993">
                        </mat-datepicker-toggle>
                        <mat-datepicker touchUi #picker2></mat-datepicker>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Fecha de Ingreso</mat-label>
                        <input matInput [matDatepicker]="picker3"
                            (dateInput)="validarFechaIngreso($event, PermisoForm.value)" placeholder="dd/mm/aaaa"
                            [formControl]="fechaFinalF" required readonly>
                        <mat-datepicker-toggle matSuffix [for]="picker3" id="permiso" 
                            matTooltipPosition="right"
                            matTooltip="Indicar la fecha de finalización del permiso. Seleccione la fecha dando click en el icono de calendario o puede escribir la fecha con el formato  día/mes/año. Ejemplo: 12/04/1993">
                        </mat-datepicker-toggle>
                        <mat-datepicker touchUi #picker3></mat-datepicker>
                        <mat-error *ngIf="fechaFinalF.invalid">{{ObtenerMensajeFecha()}}</mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Hora Salida</mat-label>
                        <input matInput type="time" (keypress)="IngresarSoloNumeros($event)" [formControl]="horaSalidaF"
                            required >
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Hora Ingreso</mat-label>
                        <input matInput type="time" (keypress)="IngresarSoloNumeros($event)"
                            [formControl]="horaIngresoF" required >
                    </mat-form-field>
                    <mat-form-field *ngIf="!HabilitarDiasL">
                        <mat-label id="letras">Fin de semana: días libres</mat-label>
                        <input matInput placeholder="Días libres" [formControl]="diaLibreF"
                            (keypress)="IngresarSoloNumeros($event)" [ngStyle]="estiloDiasL" id="Dlibres">
                        <mat-icon id="permiso" matSuffix  matTooltipPosition="right"
                            matTooltip="Indicar cuantos días de fin de semana se encuentran dentro del permiso">
                            help_outline</mat-icon>
                    </mat-form-field>
                    <section class="d-flex flex-column bd-highlight" *ngIf="isChecked">
                        <div class="bd-highlight">
                            <form method="post" enctype="multipart/form-data">
                                <input (change)="fileChange($event)" type="file" [formControl]="archivoForm" id="file">
                                <label for="file" class="btn-2" (click)="LimpiarNombreArchivo()">Subir
                                    Certificado *</label>
                            </form>
                        </div>
                        <div class="bd-highlight">
                            <input type="text" id="nombreCertific" placeholder="Ningún archivo seleccionado"
                                class="form-control" style="width: 200px;" [formControl]="nombreCertificadoF">
                        </div>
                    </section>
                </div>
            </div>
        </mat-card-content>
    </form>
    <br>
    <span class="nota">Desea editar el archivo anteriormente subido (opcional) </span>
    <mat-slide-toggle [(ngModel)]="isChecked"></mat-slide-toggle>
    <div style="text-align: center;">
        <br>
        <button type="submit" class="btn btn-sm" (click)="ValidarHora_Salida_Entrada(PermisoForm.value)"
            [disabled]="!PermisoForm.valid"> Guardar </button>
        <button type="submit" class="btn btn-sm" (click)="dialogRef.close(false)"> Salir </button>
    </div>
</div>