<mat-sidenav-container class="sidenav-container" id="style-1">

  <mat-sidenav #drawer class="sidenav mat-elevation-z15" fixedInViewport
    [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'" [mode]="(isHandset$ | async) ? 'over' : 'side'"
    [opened]="(isHandset$ | async) === false" (mouseenter)="mouseenter()" (mouseleave)="mouseleave()">

    <div class="uno">
      <img src="../../../assets/imagenes/logo/logoAdmin.png" id="logo">
    </div>

    <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree" *ngIf="!mensaje">
      <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
        <li class="material-tree-node" *ngIf="!barraInicial; else showItemsMenu">
          <ul>
            <a class="btn btn-sm btn-block" [ngClass]="{active: node.name == nombreSelect}"
              (click)="manejarEstadoActivo(node.name);" [routerLink]="[node.url]"
              style="text-align: left; color: rgb(17, 167, 236); font-size: 12px;">{{node.name}}</a>
          </ul>
        </li>
        <ng-template #showItemsMenu>
          <li class="material-tree-node">
            <ul>
              <a class="btn btn-sm btn-block" [ngClass]="{active: node.name == nombreSelect}"
                (click)="manejarEstadoActivo(node.name); drawer.toggle()" [routerLink]="[node.url]"
                style="text-align: left; color: rgb(17, 167, 236); font-size: 12px;">{{node.name}}</a>
            </ul>
          </li>
        </ng-template>

      </mat-tree-node>

      <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
        <li *ngIf="node.accion === true && node.estado">
          <button mat-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.name"
            style="width: 100%; background: rgb(255, 255, 255)">
            <div class="tree-titulos d-flex bd-highlight">
              <div class="bd-highlight">
                <mat-icon mat-list-icon id="icono-menu">{{node.icono}}</mat-icon>
              </div>
              <div class="bd-highlight">
                <h5 class="name-uno">{{node.name}}</h5>
              </div>
              <div class="ml-auto bd-highlight">
                <mat-icon class="mat-icon-rtl-mirror" id="icono-despliega">
                  {{treeControl.isExpanded(node) ? 'remove' : 'add'}}
                </mat-icon>
              </div>
            </div>
          </button>
          <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)"
            [style.padding]="treeControl.isExpanded(node) ? '20px 0px 20px 0px' : '0px 0px 0px 0px'">
            <ng-container matTreeNodeOutlet></ng-container>
          </ul>
        </li>
      </mat-nested-tree-node>

    </mat-tree>

    <mat-card *ngIf="showMessageLicencia" style="background-color: rgba(0, 89, 255, 0.849); color: white;" >
      <mat-card-header>
        <mat-card-title>Licencia caduca</mat-card-title>
        <mat-card-subtitle style="color: rgb(221, 221, 221);">
          {{fec_caducidad_licencia | date: 'fullDate' }}
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p>
          Comunicate con casa pazmiño para seguir utilizando tu sistema.
        </p>
      </mat-card-content>
      <mat-card-actions>
        <a mat-raised-button href="https://casapazmino.com.ec" target="_blank">Ir Casa Pazmiño
          <mat-icon>public</mat-icon>
        </a>
      </mat-card-actions>
    </mat-card>

  </mat-sidenav>

  <mat-sidenav-content class="degradado">
    <mat-toolbar>
      <!-- Nav para pantallas grandes -->
      <mat-toolbar-row *ngIf="!barraInicial; else ShowNavbar" class="d-flex justify-content-between">
        <div>
          <button type="button" aria-label="Toggle sidenav" mat-icon-button (click)="drawer.toggle()"
            *ngIf="isHandset$ | async">
            <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
          </button>

          <app-navbar></app-navbar>
        </div>

        <app-search></app-search>

        <div>
          <span class="example-spacer"></span>

          <!-- Botón Home -->
          <button mat-mini-fab style="margin-left: 10px; margin-right: 10px;" (click)="irHome()">
            <mat-icon id="iconos-navegador" style="margin-left: 8px;" matSuffix matTooltipClass="permiso-tooltip"
              matTooltipPosition="right" matTooltip="Ir inicio">home</mat-icon>
          </button>

          <!-- Botón Avisos -->
          <app-button-avisos></app-button-avisos>

          <!-- Botón notificación -->
          <app-button-notificacion></app-button-notificacion>

          <!-- Botón Configuraciones DE TODO -->
          <app-button-opciones></app-button-opciones>
        </div>

      </mat-toolbar-row>

      <!-- Nav para celulares o pantalla pequeña -->
      <ng-template #ShowNavbar>

        <mat-toolbar-row class="d-flex justify-content-between">
          <button type="button" aria-label="Toggle sidenav" mat-icon-button (click)="drawer.toggle()"
            *ngIf="isHandset$ | async">
            <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
          </button>

          <app-navbar></app-navbar>

          <div>
            <span class="example-spacer"></span>
            <!-- Botón Home -->
            <button mat-mini-fab style="margin: 0 10px" (click)="irHome()">
              <mat-icon id="iconos-navegador" style="margin-left: 8px;" matSuffix matTooltipPosition="right"
                matTooltip="Ir inicio">home</mat-icon>
            </button>

            <!-- Botón Configuraciones DE TODO -->
            <app-button-opciones></app-button-opciones>
          </div>


        </mat-toolbar-row>

        <mat-toolbar-row class="d-flex justify-content-start">

          <!-- Botón Avisos -->
          <app-button-avisos></app-button-avisos>

          <!-- Botón notificación -->
          <app-button-notificacion></app-button-notificacion>

          <app-search></app-search>

        </mat-toolbar-row>
      </ng-template>

    </mat-toolbar>

    <div class="container">
      <div class="row" *ngIf="mensaje; else showInfoWeb">
        <div class="col mensaje-alerta">
          <span style="color: white; font-size: 20px;">Primero debe agregar un logotipo y los colores del reporte para
            descargar en PDFs</span>
          <a type="buttom" class="btn btn-sm" id="botones" (click)="IrInfoEmpresa()">Configuración</a>
        </div>
      </div>
      <ng-template #showInfoWeb>
        <router-outlet></router-outlet>
      </ng-template>

    </div>

    <!-- <app-footer></app-footer> -->

  </mat-sidenav-content>

</mat-sidenav-container>